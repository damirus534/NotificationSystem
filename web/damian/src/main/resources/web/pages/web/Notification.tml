<!DOCTYPE html>
<html
    xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd"
    xmlns:p="tapestry:parameter">
<head>
    <meta charset="UTF-8"/>
    <title>Admin Page</title>
    <link rel="stylesheet" type="text/css" href="/css/mainpanel.css"></link>
</head>
<body>
    <t:if test="hasPermission">
        <header>
            <h1>Notifiaction Page</h1>
        </header>
        <main>
            <div class="form-table">
                <t:actionlink class="link-insert" t:id="createNotificationLink">Create Notification</t:actionlink>
            </div>
            <h2 class="centered-header">Active Notifications</h2>
            <t:if test="isEmptyList()">
                <div class="error-message">
                    <p>${formErrorMessage}</p>
                </div>
            </t:if>
            <t:if test="!isEmptyList()">
                <t:form t:id="notifform">
                    <t:if test="hasErrors()">
                        <div class="error-message-container">
                            <div class="error-message">${formErrorMessage}</div>
                        </div>
                    </t:if>
                    <div class="form-table">
                        <div class="display-table">
                            <div class="table-header">
                                <div>Creation date</div>
                                <div>Assigned user</div>
                                <div>Content</div>
                                <div>Address</div>
                                <div> </div>
                            </div>
                            <t:loop source="notificationsToDisplay" value="notification">
                                <div class="table-row">
                                    <div class="date-column">${notification.date}</div>
                                    <div class="assigned-login-column">${notification.assignedLogin.login}</div>
                                    <div class="content-column">${notification.content}</div>
                                    <div class="address-column">${notification.address}</div>
                                    <div>
                                        <t:actionlink t:id="editLink" t:context="notification.notificationId" class="button-link">Edit/Delete</t:actionlink>
                                    </div>
                                </div>
                            </t:loop>
                        </div>
                    </div>
                </t:form>
            </t:if>
        </main>
        <footer>
            <p>Â© Damian Russok Link Technology recruitment web application</p>
        </footer>
    </t:if>
    <t:if test="!hasPermission">
        <div class="no-permission">
            <h2>Access Denied</h2>
            <p>You do not have permission to access this page.</p>
        </div>
    </t:if>
</body>
</html>