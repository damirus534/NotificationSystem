<!DOCTYPE html>
<html
    xmlns:t="http://tapestry.apache.org/schema/tapestry_5_4.xsd"
    xmlns:p="tapestry:parameter">
<head>
    <meta charset="UTF-8"/>
    <title>Admin Page</title>
    <link rel="stylesheet" type="text/css" href="/css/mainpanel.css"></link>
</head>
<body>
    <t:if test="hasPermission">
        <header>
            <h1>Admin Page</h1>
        </header>
        <main>
            <div class="form-table">
                <t:actionlink class="link-insert" t:id="insertUserLink">Insert User</t:actionlink>
            </div>
            <h2 class="centered-header">Permissions management</h2>
            <t:if test="isEmptyList()">
                <div class="error-message">
                    <p>${permissionFormErrorMessage}</p>
                </div>
            </t:if>
            <t:if test="!isEmptyList()">
                <t:form t:id="permform">
                    <div class="form-table">
                        <div class="display-table">
                            <div class="table-header">
                                <div>Login</div>
                                <div>Admin</div>
                                <div>Mobile</div>
                                <div>Modify Address</div>
                                <div>Modify Content</div>
                                <div>Modify Assigned user</div>
                                <div> </div>
                            </div>
                            <t:loop source="usersToDisplay" value="user">
                                <div class="table-row">
                                    <div class="login-column">${user.login}</div>
                                    <div class="admin-column">
                                        <t:checkbox value="user.isAdmin" />
                                    </div>
                                    <div class="mobile-column">
                                        <t:checkbox value="user.mobileAppAccess"/>
                                    </div>
                                    <div class="modify-address-column">
                                        <t:checkbox value="user.modifyNtfAddr"/>
                                    </div>
                                    <div class="modify-content-column">
                                        <t:checkbox value="user.modifyNtfContent"/>
                                    </div>
                                    <div class="modify-assigned-user-column">
                                        <t:checkbox value="user.modifyNtfAssiuser"/>
                                    </div>
                                    <div>
                                        <t:actionlink t:id="editLink" t:context="user.login" class="button-link">Edit</t:actionlink>
                                    </div>
                                </div>
                            </t:loop>
                        </div>
                    </div>
                </t:form>
            </t:if>
        </main>
        <footer>
            <p>Â© Damian Russok Link Technology recruitment web application</p>
        </footer>
    </t:if>
    <t:if test="!hasPermission">
        <div class="no-permission">
            <h2>Access Denied</h2>
            <p>You do not have permission to access this page.</p>
        </div>
    </t:if>
</body>
</html>